<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selecionar para Edi√ß√£o - CODEGO</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='imagens_empresas/asentjur.png') }}" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #002b5c; border-radius: 10px; }
    </style>
</head>

<body class="min-h-screen bg-[#002b5c] p-4 md:p-8 flex flex-col items-center">

<div class="w-full max-w-6xl">

<div class="bg-white rounded-t-2xl p-6 shadow-xl border-b flex flex-col md:flex-row justify-between items-center gap-4">

<div class="flex items-center gap-4">
<div class="p-3 {% if role == 'jur' %}bg-red-50 text-red-600{% else %}bg-blue-50 text-[#002b5c]{% endif %} rounded-full">
<i data-lucide="search" class="w-6 h-6"></i>
</div>

<div>
<h1 class="text-xl font-bold text-[#002b5c]">Selecionar Registro</h1>
<p class="text-xs text-gray-500 font-medium">MODO:
<span class="{% if role == 'jur' %}text-red-600{% else %}text-blue-600{% endif %} uppercase">
{{ 'Edi√ß√£o Jur√≠dica' if role == 'jur' else 'Edi√ß√£o de Assentamento' }}
</span>
</p>
</div>
</div>

<div class="flex flex-col md:flex-row items-center gap-3 w-full md:w-auto">

<!-- üîé BARRA DE PESQUISA -->
<div class="relative w-full md:w-72">
<i data-lucide="search" class="w-4 h-4 absolute left-3 top-2.5 text-gray-400"></i>
<input id="searchInput"
type="text"
placeholder="Pesquisar munic√≠pio, empresa ou CNPJ..."
class="w-full pl-9 pr-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-[#002b5c] outline-none">
</div>

<a href="{{ url_for('dashboard.menu_jur' if role == 'jur' else 'dashboard.menu') }}"
class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-bold flex items-center gap-2 transition-all">
<i data-lucide="corner-up-left" class="w-4 h-4"></i> VOLTAR AO MENU
</a>

</div>
</div>

<div class="bg-white rounded-b-2xl shadow-2xl overflow-hidden border border-white/20">

<div class="overflow-x-auto custom-scrollbar">
<table id="tabelaRegistros" class="w-full text-left">

<thead class="bg-gray-50 text-gray-600 border-b">
<tr>
<th class="px-6 py-4 text-xs font-bold uppercase tracking-wider">Munic√≠pio</th>
<th class="px-6 py-4 text-xs font-bold uppercase tracking-wider">Empresa</th>
<th class="px-6 py-4 text-xs font-bold uppercase tracking-wider">CNPJ</th>
<th class="px-6 py-4 text-xs font-bold uppercase tracking-wider text-center">A√ß√£o</th>
</tr>
</thead>

<tbody class="divide-y divide-gray-100">

{% for item in dados %}
<tr class="hover:bg-gray-50/80 transition-colors linha-registro">
<td class="px-6 py-4 text-sm text-gray-600">{{ item['municipio'] }}</td>
<td class="px-6 py-4 text-sm font-bold text-[#002b5c]">{{ item['empresa'] }}</td>
<td class="px-6 py-4 text-sm text-gray-500 font-mono">{{ item['cnpj'] }}</td>
<td class="px-6 py-4 text-center">

{% if role == 'jur' %}
<a href="{{ url_for('edicao.editar_jur', empresa_id=item['id']) }}"
class="inline-flex items-center gap-2 bg-red-500 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-xs font-bold shadow-sm transition-all transform active:scale-95">
<i data-lucide="gavel" class="w-4 h-4"></i> EDITAR JUR√çDICO
</a>
{% else %}
<a href="{{ url_for('edicao.editar', empresa_id=item['id']) }}"
class="inline-flex items-center gap-2 bg-[#2563eb] hover:bg-[#002b5c] text-white px-4 py-2 rounded-lg text-xs font-bold shadow-sm transition-all transform active:scale-95">
<i data-lucide="edit" class="w-4 h-4"></i> EDITAR
</a>
{% endif %}

</td>
</tr>
{% endfor %}

</tbody>
</table>
</div>

{% if not dados %}
<div class="p-20 text-center">
<i data-lucide="folder-open" class="w-16 h-16 text-gray-200 mx-auto mb-4"></i>
<p class="text-gray-400 font-medium">Nenhum registro encontrado para edi√ß√£o.</p>
</div>
{% endif %}

</div>

<p class="text-white/50 text-[10px] text-center mt-4 uppercase tracking-widest">Sistema ASENTJUR - CODEGO 2024</p>

</div>

<script>
lucide.createIcons();

document.getElementById("searchInput").addEventListener("keyup", function () {

let filtro = this.value.toLowerCase();
let linhas = document.querySelectorAll(".linha-registro");

linhas.forEach(function(linha){

let texto = linha.innerText.toLowerCase();

if(texto.includes(filtro)){
linha.style.display = "";
}else{
linha.style.display = "none";
}

});

});
</script>

</body>
</html>
